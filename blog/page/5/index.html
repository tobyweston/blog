
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>bad.robot</title>
  <meta name="author" content="Toby Weston">

  
  <meta name="description" content="Window Licker is a framework designed to help you define your own fluent API for GUI testing. It provides a driver style API that your Swing or Ajax &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://www.baddotrobot.com/blog/page/5">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="bad.robot" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-3327317-6']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
    <!-- last update; 2012-02-12 10:48:51 +0000 -->
    <h1><a href="/">bad.robot</a></h1>
    
    <h2>because good robots do what they're told</h2>
    
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:www.baddotrobot.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/12/29/swt-support-for-window-licker/">SWT Support for Window Licker</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-12-29T00:00:00+00:00" pubdate data-updated="true">Dec 29<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="http://code.google.com/p/windowlicker/">Window Licker</a> is a framework designed to help you define your own fluent API for GUI testing. It provides a driver style API that your Swing or Ajax applications plug into before you go about writing GUI tests in a language natural to your application.</p>

<p>We&#8217;ve been doing some driver based GUI testing for our web apps using
<a href="http://htmlunit.sourceforge.net/">HtmlUnit</a> so I was naturally interested in
Window Licker with regard to rich client based testing. I&#8217;ve been trying to
test my SWT based apps at the unit level as much as possible, but it&#8217;s not
always straight forward separating the behaviour of GUI classes from GUI
elements. How do you test that all the validation behaviour is plumbed in
correctly and fires at the right time in a text box? So, Window Licker seemed
like a great candidate to getting some real user style testing. Great!</p>

<p>The bad news is that Window Licker doesn&#8217;t yet support SWT. Boo! The good news
is it gave me a great chance to have a go at implementing basic SWT support in
Window Licker. Yey!</p>

<p>Check out the <a href="http://windowlicker-users.googlegroups.com/web/window-licker-swt-spike.patch">patch</a> I wrote, or the
<a href="http://groups.google.com/group/windowlicker-users/browse_thread/thread/6fb792261a9cd1e7">thread</a> where we discuss it.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/12/29/swt-applications-on-mac-os-x/">SWT Applications on Mac OS X</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-12-29T00:00:00+00:00" pubdate data-updated="true">Dec 29<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I&#8217;ve had a couple of problems running SWT applications on Mac, in particular, getting balloon tool tips to appear and incorrect invalid thread access errors. It seems that the Mac specific VM option <code>-XstartOnFirstThread</code> is the cure to what ails ya! It even addresses the bug I reported <a href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=247218">here</a>!</p>

<p>It seems that by default, Java will not start on the main thread.
Cocoa/Carbon/[insert mac vodoo here] starts it all and as a consequence, the
SWT UI thread might get associated with it and not your main application
thread. Therefore, whenever the application tries to access it (even though it
looks like it owns it in your code), it may not and invalid thread access
hilarity will ensue.</p>

<p>The flip side to this is that AWT/Swing apps and plugins might have problems.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/12/24/interfaces-vs-class-imposterisers/">Interfaces vs Class impostorisers</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-12-24T00:00:00+00:00" pubdate data-updated="true">Dec 24<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I&#8217;ve been mocking with JMock2 for a while now and fully buy into using mocks and driving out behaviour using interfaces. However, I&#8217;m not sure I get the resistance when people want to use class impostorisers.</p>

<p>I&#8217;ve been doing a lot with SWT lately and always want to unit test the GUI
elements. One way I&#8217;ve managed to do this is to mock parts of the GUI
framework using impostorisers. Unless I want a full on GUI brought up, there
just isn&#8217;t another way. The GUI API doesn&#8217;t offer me any convenient interfaces
and I can&#8217;t even create sub-classed mocks myself as the framework prevents you
sub-classing with run time checks.</p>

<p>I understand that by slowly teasing out behaviour during the mocking / TDD
process you can clearly express the collaborations a class may have but I feel
that you can still be clear about a classes behaviour when impostorising. It&#8217;s
just code right? I&#8217;m not sure I care that collaborations are documented as
interfaces or not, my tests express the relationships and I&#8217;ve gone through
the same thought process to understand clearly how the classes under test
interact. So why is an impostor a bad guy?</p>

<p>In the case of legacy code or third part code, you&#8217;re kind of stuck with
impostorisers right? I mean you could build an application layer between your
code and the third party stuff but I&#8217;d want better motivation for doing this
than to avoid using impostorisers.</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2008/12/24/interfaces-vs-class-imposterisers/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/12/17/junit-and-threaded-tests-i-recently/">JUnit and Threaded Tests</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-12-17T00:00:00+00:00" pubdate data-updated="true">Dec 17<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I recently noticed a bit of a problem when playing with threads within JUnit. Take the following snippet as an example;</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="nd">@Test</span>
</span><span class='line'><span class="kd">public</span> <span class="kt">void</span> <span class="nf">exaple</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">Thread</span> <span class="n">thread</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Thread</span><span class="o">(</span><span class="k">new</span> <span class="n">Runnable</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>        <span class="nd">@Override</span>
</span><span class='line'>        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;hello&quot;</span><span class="o">);</span>
</span><span class='line'>            <span class="k">try</span> <span class="o">{</span>
</span><span class='line'>                <span class="n">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">10000</span><span class="o">);</span>
</span><span class='line'>            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>                <span class="n">Thread</span><span class="o">.</span><span class="na">interrupt</span><span class="o">();</span>
</span><span class='line'>            <span class="o">}</span>
</span><span class='line'>            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;bye&quot;</span><span class="o">);</span>
</span><span class='line'>        <span class="o">}</span>
</span><span class='line'>    <span class="o">});</span>
</span><span class='line'>    <span class="n">assertThat</span><span class="o">(</span><span class="n">thread</span><span class="o">.</span><span class="na">isDaemon</span><span class="o">(),</span> <span class="n">is</span><span class="o">(</span><span class="n">NON_DAEMON</span><span class="o">));</span>
</span><span class='line'>    <span class="n">thread</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Here, the string &#8220;bye&#8221; is never shown, it would seem that when the test method
finishes it somehow messes with the threads&#8230;</p>

<p>Looking into things, it seems in my case that naughty Eclipse is muddying the
water! The <code>RemoteTestRunner</code> class which Eclipse uses to run the tests ends up
calling <code>System.exit(0)</code> after it&#8217;s run all the tests to kill the parent Java
process. Even if we changed the daemon status of the thread, you&#8217;d get the
same behaviour, ie, no &#8220;bye&#8221; being shown.</p>

<p>So, in some situations it is possible to interrupt a thread in a JUnit test
bypassing the interrupt mechanism when running a test from Eclipse. IntelliJ
actually seems to have the same behaviour but I can&#8217;t review to source to
confirm.</p>

<p><a href="http://lh6.ggpht.com/_-uMxV_fCbC4/SVInGoVdYJI/AAAAAAAAC08/I4RV1KzCyPo/gibble_22x22.png"><img src="http://lh6.ggpht.com/_-uMxV_fCbC4/SVInGoVdYJI/AAAAAAAAC08/I4RV1KzCyPo/gibble_22x22.png"></a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/12/11/bit-disappointing-this-year/">XPDay 2008</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-12-11T00:00:00+00:00" pubdate data-updated="true">Dec 11<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Bit disappointing really. Things didn&#8217;t get started properly will around 12:00 on day 1. I got to attend two really interesting talks of ~30 minutes each but then got trapped in a couple of nightmarish &#8216;Open Spaces&#8217; which ended up being a rather self-indulgent discussions about nothing in particular.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2006/03/14/new-blog-moved-to-new-blog-today-at/">New Blog</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2006-03-14T00:00:00+00:00" pubdate data-updated="true">Mar 14<span>th</span>, 2006</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Moved to a new blog today at blogspot.com. How exciting does life get?</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/4/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2012/01/29/transaction-management-without/">Transaction Management without the Frameworks</a>
      </li>
    
      <li class="post">
        <a href="/blog/2011/10/29/java-source-on-mac/">Java source on Mac</a>
      </li>
    
      <li class="post">
        <a href="/blog/2011/08/29/reflecting-on-interviewing-mistakes/">Reflecting on Interviewing Mistakes</a>
      </li>
    
      <li class="post">
        <a href="/blog/2011/08/29/catching-multiple-exceptions-and/">Catching Multiple Exceptions (and rethrowing them all!)</a>
      </li>
    
      <li class="post">
        <a href="/blog/2011/06/22/loggin-is-still-evil-but/">Loggin is still evil but&#8230;</a>
      </li>
    
      <li class="post">
        <a href="/blog/2011/06/10/artcile-in-javatech-journal/">JDK7 Artcile in JavaTech Journal</a>
      </li>
    
      <li class="post">
        <a href="/blog/2011/04/13/tempus-fugit-1.1-released/">tempus-fugit 1.1 released</a>
      </li>
    
      <li class="post">
        <a href="/blog/2011/03/04/jdk-7-previewed/">JDK7 Previewed</a>
      </li>
    
      <li class="post">
        <a href="/blog/2010/10/18/logging-is-evil-but/">Logging is evil but&#8230;</a>
      </li>
    
      <li class="post">
        <a href="/blog/2010/08/15/pairing-honestly/">Pairing Honestly</a>
      </li>
    
  </ul>
</section>
<section>
  <h1>Categories</h1>
  <p>
      <a href="blog/categories/agile/">agile</a>
      <a href="blog/categories/coaching/">coaching</a>
      <a href="blog/categories/concurrency/">concurrency</a>
      <a href="blog/categories/java/">java</a>
      <a href="blog/categories/mocking/">mocking</a>
      <a href="blog/categories/object-oriented/">object-oriented</a>
      <a href="blog/categories/performance/">performance</a>
      <a href="blog/categories/tempus-fugit/">tempus-fugit</a>
      <a href="blog/categories/testing/">testing</a>
  </p>
</section>

<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("jamanifin", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/jamanifin" class="twitter-follow-button" data-show-count="false">Follow @jamanifin</a>
  
</section>



  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2006-2012 - Toby Weston -
  <span class="credit">Powered by the awesome <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'badrobot';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
