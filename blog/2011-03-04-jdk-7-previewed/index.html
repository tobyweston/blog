<!DOCTYPE html><html lang="en"> <head><!-- Global Metadata --><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" type="image/x-icon" href="/favicon.ico"><meta name="generator" content="Astro v5.18.0"><meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1"><!-- Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-1PVLDLDJQN"></script><script>(function(){const gaId = "G-1PVLDLDJQN";

      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag('js', new Date());
      gtag('config', gaId);
    })();</script><!-- Canonical URL --><link rel="canonical" href="https://baddotrobot.com/blog/2011-03-04-jdk-7-previewed/"><!-- RSS Feed --><link rel="alternate" type="application/rss+xml" title="bad.robot" href="/rss.xml"><!-- Primary Meta Tags --><title>JDK7 Previewed</title><meta name="title" content="JDK7 Previewed"><meta name="description" content="A preview of noteworthy Java 7 features: diamond operator, try-with-resources, switch on strings, and the foundation they lay for Java 8 lambdas."><meta name="keywords" content="Java 7, JDK 7, diamond operator, try-with-resources, AutoCloseable, type inference, switch on strings"><!-- Open Graph / Facebook --><meta property="og:type" content="website"><meta property="og:url" content="https://baddotrobot.com/blog/2011-03-04-jdk-7-previewed/"><meta property="og:title" content="JDK7 Previewed"><meta property="og:description" content="A preview of noteworthy Java 7 features: diamond operator, try-with-resources, switch on strings, and the foundation they lay for Java 8 lambdas."><meta property="og:image" content="https://baddotrobot.com/images/heroes/java-code.jpg"><meta property="og:site_name" content="bad.robot"><!-- Twitter --><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://baddotrobot.com/blog/2011-03-04-jdk-7-previewed/"><meta property="twitter:title" content="JDK7 Previewed"><meta property="twitter:description" content="A preview of noteworthy Java 7 features: diamond operator, try-with-resources, switch on strings, and the foundation they lay for Java 8 lambdas."><meta property="twitter:image" content="https://baddotrobot.com/images/heroes/java-code.jpg"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","headline":"JDK7 Previewed","description":"A preview of noteworthy Java 7 features: diamond operator, try-with-resources, switch on strings, and the foundation they lay for Java 8 lambdas.","datePublished":"2011-03-04T00:00:00.000Z","url":"https://baddotrobot.com/blog/2011-03-04-jdk-7-previewed/","author":{"@type":"Person","name":"Toby Weston","url":"https://baddotrobot.com"},"publisher":{"@type":"Person","name":"bad.robot"}}</script><link rel="stylesheet" href="/_astro/index.BiihJROh.css">
<style>.giscus-wrapper[data-astro-cid-2s6z27su]{margin-top:3rem;padding-top:0}.giscus-divider[data-astro-cid-2s6z27su]{display:flex;align-items:center;gap:1rem;margin-bottom:1.5rem}.giscus-divider[data-astro-cid-2s6z27su]:before,.giscus-divider[data-astro-cid-2s6z27su]:after{content:"";flex:1;height:1px;background:var(--border)}.giscus-divider-label[data-astro-cid-2s6z27su]{text-transform:uppercase;letter-spacing:.2em;color:var(--accent);font-size:.75rem;font-weight:600;white-space:nowrap}.giscus[data-astro-cid-2s6z27su],.giscus-frame[data-astro-cid-2s6z27su]{width:100%}
</style>
<link rel="stylesheet" href="/_astro/_slug_.Bryw6KM9.css"></head> <body class="bg-white text-gray-900"> <header class="header" data-astro-cid-3ef6ksr2> <div class="header-container" data-astro-cid-3ef6ksr2> <div class="logo-section" data-astro-cid-3ef6ksr2> <a href="/" class="logo-link" data-astro-cid-3ef6ksr2> <img src="/_astro/robot-logo_105x132.N1ZQY9mA_Zj02tT.webp" alt="bad.robot logo" data-astro-cid-3ef6ksr2="true" loading="lazy" decoding="async" fetchpriority="auto" width="84" height="106" class="logo-image"> <div class="logo-text-block" data-astro-cid-3ef6ksr2> <h1 class="logo-title logo-text header-logo-text" data-astro-cid-3ef6ksr2>bad.robot</h1> <h2 class="logo-subtitle logo-subtitle-text header-subtitle" data-astro-cid-3ef6ksr2>good robots do what they&#39;re told</h2> </div> </a> </div> <nav class="nav" data-astro-cid-3ef6ksr2> <a href="/blog" data-astro-cid-3ef6ksr2>Blog</a> <a href="/book" data-astro-cid-3ef6ksr2>Books</a> <a href="/video" data-astro-cid-3ef6ksr2>Videos</a> <a href="/archive" data-astro-cid-3ef6ksr2>Archive</a> </nav> <div id="header-animation-switcher" class="header-switcher" style="display: none;" data-astro-cid-3ef6ksr2> <div class="switcher-buttons" data-astro-cid-3ef6ksr2> <button class="switcher-btn active" data-option="1" title="Smooth Fade Only" data-astro-cid-3ef6ksr2> <span class="btn-icon" data-astro-cid-3ef6ksr2>‚ö´</span> </button> <button class="switcher-btn" data-option="2" title="Fade + Gentle Lift" data-astro-cid-3ef6ksr2> <span class="btn-icon" data-astro-cid-3ef6ksr2>‚¨ÜÔ∏è</span> </button> <button class="switcher-btn" data-option="3" title="Slide In Left" data-astro-cid-3ef6ksr2> <span class="btn-icon" data-astro-cid-3ef6ksr2>‚û°Ô∏è</span> </button> <button class="switcher-btn" data-option="4" title="Blur Fade" data-astro-cid-3ef6ksr2> <span class="btn-icon" data-astro-cid-3ef6ksr2>üîÆ</span> </button> <button class="switcher-btn" data-option="5" title="Subtle Scale" data-astro-cid-3ef6ksr2> <span class="btn-icon" data-astro-cid-3ef6ksr2>üìà</span> </button> </div> </div> </div> </header>  <main id="site-main" class="mx-auto w-full max-w-6xl px-4 pt-4">   <div class="py-12"> <article class=""> <!--{heroImage && (--> <!--  <div class="hero-image mb-8">--> <!--    <img src={heroImage} alt={title} class="w-full h-auto rounded-lg shadow-lg" />--> <!--  </div>--> <!--)}--> <div class="article-title-section mb-8"> <p class="detail-kicker">Blog</p> <h1 class="article-title-section h1">JDK7 Previewed</h1> <p class="article-subtitle">Explore the new language features coming in Java 7</p> <p class="article-description">A preview of noteworthy Java 7 features: diamond operator, try-with-resources, switch on strings, and the foundation they lay for Java 8 lambdas.</p> </div> <div class="article-meta"> <div class="article-date"> <strong>Published:</strong> <time datetime="2011-03-04T00:00:00.000Z"> Mar 4, 2011 </time> </div>  </div> <div class="prose">  <p>Oracle put out the preview release of JDK7 last month. I guess they felt they had to. So, it‚Äôs not what was once heralded (will <a href="http://openjdk.java.net/projects/lambda/">8 see lambdas</a>?) but still has one or two interesting language features. A few that caught my eye include‚Ä¶</p>
<h3 id="type-inference-on-generic-object-creation">Type Inference on Generic Object Creation</h3>
<p>Which allows a little brevity to the garrulity of the language, at least against generic object instantiation where the type can be inferred. For example,</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="java"><code><span class="line"><span style="color:#F97583">private</span><span style="color:#E1E4E8"> Map&#x3C;</span><span style="color:#F97583">Size</span><span style="color:#E1E4E8">, List&#x3C;</span><span style="color:#F97583">Shoe</span><span style="color:#E1E4E8">>> stock </span><span style="color:#F97583">=</span><span style="color:#F97583"> new</span><span style="color:#E1E4E8"> HashMap&#x3C;</span><span style="color:#F97583">Size</span><span style="color:#E1E4E8">, List&#x3C;</span><span style="color:#F97583">Shoe</span><span style="color:#E1E4E8">>>();</span></span></code></pre>
<p>can be reduced to</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="java"><code><span class="line"><span style="color:#F97583">private</span><span style="color:#E1E4E8"> Map&#x3C;</span><span style="color:#F97583">Size</span><span style="color:#E1E4E8">, List&#x3C;</span><span style="color:#F97583">Shoe</span><span style="color:#E1E4E8">>> stock </span><span style="color:#F97583">=</span><span style="color:#F97583"> new</span><span style="color:#E1E4E8"> HashMap&#x3C;>();</span></span></code></pre>
<p>where the <em>diamond operator</em> can be filled in or inferred from the declaration. It‚Äôs subtly different than leaving out the generic completely which will reduce your type to being of <code>Object</code> Things don‚Äôt get much better than this.</p>
<p>Actually, it does. Just a little. Constructor generics always used to be fun and that hasn‚Äôt really changed, although with JDK7 you can do a little more. For example,</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="java"><code><span class="line"><span style="color:#F97583">public</span><span style="color:#F97583"> class</span><span style="color:#B392F0"> Bob</span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#F97583">Y</span><span style="color:#E1E4E8">> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">    public</span><span style="color:#E1E4E8"> &#x3C;</span><span style="color:#F97583">T</span><span style="color:#E1E4E8">> </span><span style="color:#B392F0">Bob</span><span style="color:#E1E4E8">(T </span><span style="color:#FFAB70">t</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">    public</span><span style="color:#F97583"> void</span><span style="color:#B392F0"> example</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#E1E4E8">        Bob&#x3C;</span><span style="color:#F97583">Integer</span><span style="color:#E1E4E8">> bob </span><span style="color:#F97583">=</span><span style="color:#F97583"> new</span><span style="color:#E1E4E8"> Bob&#x3C;>(</span><span style="color:#9ECBFF">"yum"</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">    public</span><span style="color:#F97583"> void</span><span style="color:#B392F0"> anotherExample</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#E1E4E8">        Bob&#x3C;</span><span style="color:#F97583">Integer</span><span style="color:#E1E4E8">> bob </span><span style="color:#F97583">=</span><span style="color:#F97583"> new</span><span style="color:#E1E4E8"> &#x3C;</span><span style="color:#F97583">String</span><span style="color:#E1E4E8">> Bob&#x3C;>(</span><span style="color:#9ECBFF">"yum"</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<p>The examples are the same as the one Oracle gives, they both work with JDK7 only and show the <code>Integer</code> type inferred as the class generic (<code>Y</code>) in combination with the diamond operator. The second example shows new syntax to explicitly set type of the method generic and give some additional compile time checks.</p>
<h3 id="try-with-resource-and-autoclosable">try-with-resource and <code>AutoClosable</code></h3>
<p>Another bugbear with the verbosity of Java has always been the try-catch-finally syntax. The new language feature try-with-resource allows you to chop this down some what in combination with auto-closable resources. Here, rather than the familiar, try-finally to close a resource, you can ‚Äúopen‚Äù the resource within the parenthesis of the try statement (as long as the object implements <code>AutoCloassable</code> and the resource will always close itself in a <code>finally</code> like way.</p>
<p>For example,</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="java"><code><span class="line"><span style="color:#F97583">private</span><span style="color:#E1E4E8"> String </span><span style="color:#B392F0">example</span><span style="color:#E1E4E8">() throws IOException {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">    BufferedReader reader </span><span style="color:#F97583">=</span><span style="color:#F97583"> new</span><span style="color:#B392F0"> BufferedReader</span><span style="color:#E1E4E8">(...);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">    try</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">        return</span><span style="color:#E1E4E8"> reader.</span><span style="color:#B392F0">readLine</span><span style="color:#E1E4E8">();</span></span>
<span class="line"><span style="color:#E1E4E8">    } </span><span style="color:#F97583">finally</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">        reader.</span><span style="color:#B392F0">close</span><span style="color:#E1E4E8">();</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<p>gets replaced with</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="java"><code><span class="line"><span style="color:#F97583">private</span><span style="color:#E1E4E8"> String </span><span style="color:#B392F0">example</span><span style="color:#E1E4E8">() throws IOException {</span></span>
<span class="line"><span style="color:#F97583">    try</span><span style="color:#E1E4E8">(BufferedReader reader </span><span style="color:#F97583">=</span><span style="color:#F97583"> new</span><span style="color:#B392F0"> BufferedReader</span><span style="color:#E1E4E8">(...) {</span></span>
<span class="line"><span style="color:#E1E4E8">         return reader.</span><span style="color:#B392F0">readLine</span><span style="color:#E1E4E8">();</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<p>Dr Heinz combined this technique with a way to automatically unlock locked resources in a <a href="http://www.javaspecialists.eu/archive/Issue190.html">recent news letter</a>.</p>
<p>There may be a little gotcha using this where exceptions can be suppressed and have to be retrieved using <code>Throwable.getSuppressed()</code>. This seems like it could be nasty.</p>
<h3 id="catching-multiple-exceptions">Catching Multiple Exceptions</h3>
<p>This one allows you to catch multiple exceptions using a pipe to separate the exception types. This looks like another work around for the general grips with Java but removes the duplicated code you often get catching several exceptions and treating them in the same way. For example,</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="java"><code><span class="line"><span style="color:#F97583">catch</span><span style="color:#E1E4E8"> (IOException | SQLException </span><span style="color:#FFAB70">e</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#E1E4E8">    logger.</span><span style="color:#B392F0">log</span><span style="color:#E1E4E8">(e);</span></span>
<span class="line"><span style="color:#F97583">    throw</span><span style="color:#E1E4E8"> ex;</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<p>I usually end up pushing the code to execute as a <code>Callable</code> and dealing with the exception in a lambda-like piece of code, or decorating the fragment to deal with exceptions (logging or wrapping) or even trying really hard to throw around runtime exceptions, so this one is at odds with my general approach. Given the example from Oracle above, I suspect this will just facilitate ugly, jammed in code. It seems to say ‚Äúit‚Äôs ok to deal with a bunch of exceptions in the same way. in fact, we‚Äôll make it easier for you‚Äù without any warning about if you actually <em>should</em> be doing this type of thing. The fact the example above (Oracle‚Äôs example, by the way) logs then re-throws is a smell in it‚Äôs self. Perhaps I‚Äôm being premenstrual, but I‚Äôm not a fan of this one.</p>
<p>Have a look <a href="http://download.java.net/jdk7/docs/#NewFeature">here</a> for on the new features and download from <a href="http://www.oracle.com/technetwork/java/javase/downloads/ea-jsp-142245.html">here</a> (unfortunately, not for the Mac).</p>
<p><strong>UPDATE:</strong> An extended version of this post has been published in <a href="/blog/2011-06-10-artcile-in-javatech-journal/">May edition of the JavaTech Journal</a>.</p>  </div> <div class="giscus-wrapper" data-astro-cid-2s6z27su><div class="giscus-divider" data-astro-cid-2s6z27su><span class="giscus-divider-label" data-astro-cid-2s6z27su>Discussion</span></div><div class="giscus" id="giscus-container" data-astro-cid-2s6z27su></div></div><script type="module">const repo = "tobyweston/blog";
const repoId = "MDEwOlJlcG9zaXRvcnkzMzUyNTYw";
const category = "General";
const categoryId = "DIC_kwDOADMn8M4C3bWR";

    function loadGiscus() {
      const container = document.getElementById('giscus-container');
      if (!container) return;

      const script = document.createElement('script');
      script.src            = 'https://giscus.app/client.js';
      script.setAttribute('data-repo',              repo);
      script.setAttribute('data-repo-id',           repoId);
      script.setAttribute('data-category',          category);
      script.setAttribute('data-category-id',       categoryId);
      script.setAttribute('data-mapping',           'pathname');
      script.setAttribute('data-strict',            '0');
      script.setAttribute('data-reactions-enabled', '1');
      script.setAttribute('data-emit-metadata',     '0');
      script.setAttribute('data-input-position',    'top');
      script.setAttribute('data-theme',             'light');
      script.setAttribute('data-lang',              'en');
      script.setAttribute('data-loading',           'lazy');
      script.crossOrigin    = 'anonymous';
      script.async          = true;
      container.appendChild(script);
    }

    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', loadGiscus);
    } else {
      loadGiscus();
    }
  </script> </article> </div>  </main> <footer class="py-8 border-t border-gray-200 mt-12"> <div class="container mx-auto px-4 text-center"> <p class="text-xs text-gray-600">&copy; 2008-2026 Toby Weston. All rights reserved. (see some old <a class="text-gray-600 hover:text-sky-600" href="/code/">code</a>)</p> </div> </footer> </body></html>