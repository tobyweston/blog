<!DOCTYPE html><html lang="en"> <head><!-- Global Metadata --><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" type="image/x-icon" href="/favicon.ico"><meta name="generator" content="Astro v5.18.0"><meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1"><!-- Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-1PVLDLDJQN"></script><script>(function(){const gaId = "G-1PVLDLDJQN";

      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag('js', new Date());
      gtag('config', gaId);
    })();</script><!-- Canonical URL --><link rel="canonical" href="https://baddotrobot.com/blog/2012-03-30-scala-exception-handling/"><!-- RSS Feed --><link rel="alternate" type="application/rss+xml" title="bad.robot" href="/rss.xml"><!-- Primary Meta Tags --><title>Scala Exception Handling</title><meta name="title" content="Scala Exception Handling"><meta name="description" content="Exception handling in Scala: from familiar try/catch with pattern matching to functional approaches using Either and Option types."><meta name="keywords" content="Scala exception handling, pattern matching, try catch, Either, Option, functional error handling"><!-- Open Graph / Facebook --><meta property="og:type" content="website"><meta property="og:url" content="https://baddotrobot.com/blog/2012-03-30-scala-exception-handling/"><meta property="og:title" content="Scala Exception Handling"><meta property="og:description" content="Exception handling in Scala: from familiar try/catch with pattern matching to functional approaches using Either and Option types."><meta property="og:image" content="https://baddotrobot.com/images/heroes/java-code.jpg"><meta property="og:site_name" content="bad.robot"><!-- Twitter --><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://baddotrobot.com/blog/2012-03-30-scala-exception-handling/"><meta property="twitter:title" content="Scala Exception Handling"><meta property="twitter:description" content="Exception handling in Scala: from familiar try/catch with pattern matching to functional approaches using Either and Option types."><meta property="twitter:image" content="https://baddotrobot.com/images/heroes/java-code.jpg"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","headline":"Scala Exception Handling","description":"Exception handling in Scala: from familiar try/catch with pattern matching to functional approaches using Either and Option types.","datePublished":"2012-03-30T00:00:00.000Z","url":"https://baddotrobot.com/blog/2012-03-30-scala-exception-handling/","author":{"@type":"Person","name":"Toby Weston","url":"https://baddotrobot.com"},"publisher":{"@type":"Person","name":"bad.robot"}}</script><link rel="stylesheet" href="/_astro/index.BiihJROh.css">
<style>.giscus-wrapper[data-astro-cid-2s6z27su]{margin-top:3rem;padding-top:0}.giscus-divider[data-astro-cid-2s6z27su]{display:flex;align-items:center;gap:1rem;margin-bottom:1.5rem}.giscus-divider[data-astro-cid-2s6z27su]:before,.giscus-divider[data-astro-cid-2s6z27su]:after{content:"";flex:1;height:1px;background:var(--border)}.giscus-divider-label[data-astro-cid-2s6z27su]{text-transform:uppercase;letter-spacing:.2em;color:var(--accent);font-size:.75rem;font-weight:600;white-space:nowrap}.giscus[data-astro-cid-2s6z27su],.giscus-frame[data-astro-cid-2s6z27su]{width:100%}
</style>
<link rel="stylesheet" href="/_astro/_slug_.Bryw6KM9.css"></head> <body class="bg-white text-gray-900"> <header class="header" data-astro-cid-3ef6ksr2> <div class="header-container" data-astro-cid-3ef6ksr2> <div class="logo-section" data-astro-cid-3ef6ksr2> <a href="/" class="logo-link" data-astro-cid-3ef6ksr2> <img src="/_astro/robot-logo_105x132.N1ZQY9mA_Zj02tT.webp" alt="bad.robot logo" data-astro-cid-3ef6ksr2="true" loading="lazy" decoding="async" fetchpriority="auto" width="84" height="106" class="logo-image"> <div class="logo-text-block" data-astro-cid-3ef6ksr2> <h1 class="logo-title logo-text header-logo-text" data-astro-cid-3ef6ksr2>bad.robot</h1> <h2 class="logo-subtitle logo-subtitle-text header-subtitle" data-astro-cid-3ef6ksr2>good robots do what they&#39;re told</h2> </div> </a> </div> <nav class="nav" data-astro-cid-3ef6ksr2> <a href="/blog" data-astro-cid-3ef6ksr2>Blog</a> <a href="/book" data-astro-cid-3ef6ksr2>Books</a> <a href="/video" data-astro-cid-3ef6ksr2>Videos</a> <a href="/archive" data-astro-cid-3ef6ksr2>Archive</a> </nav> </div> </header>  <main id="site-main" class="mx-auto w-full max-w-6xl px-4 pt-4">   <div class="py-12"> <article class=""> <!--{heroImage && (--> <!--  <div class="hero-image mb-8">--> <!--    <img src={heroImage} alt={title} class="w-full h-auto rounded-lg shadow-lg" />--> <!--  </div>--> <!--)}--> <div class="article-title-section mb-8"> <p class="detail-kicker">Blog</p> <h1 class="article-title-section h1">Scala Exception Handling</h1>  <p class="article-description">Exception handling in Scala: from familiar try/catch with pattern matching to functional approaches using Either and Option types.</p> </div> <div class="article-meta"> <div class="article-date"> <strong>Published:</strong> <time datetime="2012-03-30T00:00:00.000Z"> Mar 30, 2012 </time> </div>  </div> <div class="prose">  <p>We’re very used to Java’s notion of checked exceptions. If we want to force the developer to consider exceptional behaviour then we typically throw a checked exception. The problem is that despite our best intentions, we can’t force the developer to actually deal with the exception sensibly. Java tries to help by forcing a compilation error onto the developer so they at least forced to choose a course of action. The trouble is though it’s all too tempting to swallow exceptions or just rethrow. We tend to either bury our heads in the sand or litter our code with addition noise.</p>
<p>Scala has taken a different approach. Scala has done away with checked exceptions; all exceptions are effectively <code>RuntimeException</code>s and so its left to the developer to decide when to handle them. This obviously leads to less noise but puts more responsibility on the developer. Scala makes it easy to avoid the issue but without a clear system wide policy for exception handling, we can still get into trouble.</p>
<p>In a <a href="/blog/2012-03-29-building-better-exceptions">previous post</a>, I’ve described a general approach to understanding <em>when</em> and <em>how</em> to deal with exceptions in Scala or Java. In this post, we’ll take a quick look at Scala’s syntax around exceptions and how pattern matching is employed.</p>
<h2 id="exceptions">Exceptions</h2>
<p>Scala essentially treats all exception types as <code>RuntimeException</code>. This means it doesn’t <em>force</em> you to handle exceptions. Instead, it combines <em>pattern matching</em> with a single <code>catch</code> block to handle exceptions. For example</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="scala"><code><span class="line"><span style="color:#F97583">try</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">  val</span><span style="color:#FFAB70"> url</span><span style="color:#F97583"> =</span><span style="color:#F97583"> new</span><span style="color:#B392F0"> URL</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"http://baddotrobot.com"</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#E1E4E8">} </span><span style="color:#F97583">catch</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">  case</span><span style="color:#FFAB70"> e</span><span style="color:#E1E4E8">: </span><span style="color:#B392F0">MalformURLException</span><span style="color:#F97583"> =></span><span style="color:#E1E4E8"> println(</span><span style="color:#9ECBFF">"bad url "</span><span style="color:#F97583"> +</span><span style="color:#E1E4E8"> e)</span></span>
<span class="line"><span style="color:#F97583">  case</span><span style="color:#FFAB70"> e</span><span style="color:#E1E4E8">: </span><span style="color:#B392F0">IOException</span><span style="color:#F97583"> =></span><span style="color:#E1E4E8"> println(</span><span style="color:#9ECBFF">"other IO problem "</span><span style="color:#F97583"> +</span><span style="color:#E1E4E8"> e)</span></span>
<span class="line"><span style="color:#F97583">  case</span><span style="color:#E1E4E8"> _ </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> println(</span><span style="color:#9ECBFF">"anything else!"</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#E1E4E8">} </span><span style="color:#F97583">finally</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#6A737D">  // cleanup</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<p>Any cleanup can be achieved using the <code>finally</code> block as expected. This works exactly the same way as in Java but perhaps a more idiomatic alternative is to use the <em><a href="https://wiki.scala-lang.org/display/SYGN/Loan">loan pattern</a></em>. You can see an example of the pattern in Java form in the <code>ExecuteUsingLock</code> <a href="https://github.com/tobyweston/tempus-fugit/blob/master/src/main/java/com/google/code/tempusfugit/concurrency/ExecuteUsingLock.java">class</a> in <a href="http://tempusfugitlibrary.org/">tempus-fugit</a>.</p>
<p>Throwing exceptions is done in the same way as Java, as in the example below.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="scala"><code><span class="line"><span style="color:#F97583">def</span><span style="color:#B392F0"> load</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">url</span><span style="color:#E1E4E8">: </span><span style="color:#B392F0">String</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#6A737D">  // ...</span></span>
<span class="line"><span style="color:#F97583">  throw</span><span style="color:#F97583"> new</span><span style="color:#B392F0"> IOException</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"failed to load"</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<p>However, anyone calling this method won’t be forced by the compiler to catch the exception. If you intend to call your Scala code from Java however, you can force checked exceptions using the <code>throws</code> annotation but this still won’t affect Scala clients.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="scala"><code><span class="line"><span style="color:#F97583">@</span><span style="color:#E1E4E8">throws(</span><span style="color:#79B8FF">classOf</span><span style="color:#E1E4E8">[java.io.</span><span style="color:#B392F0">IOException</span><span style="color:#E1E4E8">])</span></span>
<span class="line"><span style="color:#F97583">def</span><span style="color:#B392F0"> load</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">url</span><span style="color:#E1E4E8">: </span><span style="color:#B392F0">String</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#6A737D">  // ...</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<p>Interestingly, Scala treats <code>throw</code> as an expression with a return type of <code>Nothing</code>. You can use it in place of any other expression even though the result wont actually evaluate to anything.</p>
<h2 id="pattern-matching">Pattern Matching</h2>
<p>Pattern matching is a bit like a switch statement but unlike Java’s switch statement, pattern matching in Scala can be used to match any kind of constant as well as other things (like <em>case objects</em>). It’s not restricted to just primitives and enums as with Java (although Java 1.7 brought <code>String</code> <a href="http://docs.oracle.com/javase/7/docs/technotes/guides/language/strings-switch.html">support to switch</a>).</p>
<p>Pattern matching is applied to the exception type when using <code>catch</code> above but it’s also used in its vanilla form. For example, as described in <a href="http://www.artima.com/shop/programming_in_scala_2ed">Programming in Scala</a>, we can work out what to have with dinner in the example below.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="scala"><code><span class="line"><span style="color:#F97583">def</span><span style="color:#B392F0"> accompaniment</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">dinner</span><span style="color:#E1E4E8">: </span><span style="color:#B392F0">String</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#E1E4E8">  dinner </span><span style="color:#F97583">match</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">    case</span><span style="color:#9ECBFF"> "fish"</span><span style="color:#F97583"> =></span><span style="color:#E1E4E8"> println(</span><span style="color:#9ECBFF">"chips"</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#F97583">    case</span><span style="color:#9ECBFF"> "sausage"</span><span style="color:#F97583"> =></span><span style="color:#E1E4E8"> println(</span><span style="color:#9ECBFF">"mash"</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#F97583">    case</span><span style="color:#9ECBFF"> "sheep"</span><span style="color:#F97583"> =></span><span style="color:#E1E4E8"> println(</span><span style="color:#9ECBFF">"cheese"</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#F97583">    case</span><span style="color:#E1E4E8"> _ </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> println(</span><span style="color:#9ECBFF">"beans?"</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<p>Notice that there is no need for a <code>break</code> statement and that each match expression results in a value. So we can take advantage of resulting value and rewrite the above to the following.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="scala"><code><span class="line"><span style="color:#F97583">def</span><span style="color:#B392F0"> anotherAccompaniment</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">dinner</span><span style="color:#E1E4E8">: </span><span style="color:#B392F0">String</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#F97583">  val</span><span style="color:#FFAB70"> accompaniment</span><span style="color:#F97583"> =</span></span>
<span class="line"><span style="color:#E1E4E8">    dinner </span><span style="color:#F97583">match</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">      case</span><span style="color:#9ECBFF"> "fish"</span><span style="color:#F97583"> =></span><span style="color:#9ECBFF"> "chips"</span></span>
<span class="line"><span style="color:#F97583">      case</span><span style="color:#9ECBFF"> "sausage"</span><span style="color:#F97583"> =></span><span style="color:#9ECBFF"> "mash"</span></span>
<span class="line"><span style="color:#F97583">      case</span><span style="color:#9ECBFF"> "sheep"</span><span style="color:#F97583"> =></span><span style="color:#9ECBFF"> "cheese"</span></span>
<span class="line"><span style="color:#F97583">      case</span><span style="color:#E1E4E8"> _ </span><span style="color:#F97583">=></span><span style="color:#9ECBFF"> "beans goes with anything!"</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span>
<span class="line"><span style="color:#E1E4E8">  println(accompaniment)</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<h2 id="conclusion">Conclusion</h2>
<p>The whole thing is generally neater than the Java equivalent but as I keep banging on about, we still need to carefully consider where to apply the <code>catch</code> when handling exceptions. When using Scala, it’s even more important to understand where potential exceptions will bubble up and how to <a href="/blog/2012-03-28-exception-handling-as-a-system-wide-concern/">handle them as a system wide concern</a>.</p>  </div> <div class="giscus-wrapper" data-astro-cid-2s6z27su><div class="giscus-divider" data-astro-cid-2s6z27su><span class="giscus-divider-label" data-astro-cid-2s6z27su>Discussion</span></div><div class="giscus" id="giscus-container" data-astro-cid-2s6z27su></div></div><script type="module">const repo = "tobyweston/blog";
const repoId = "MDEwOlJlcG9zaXRvcnkzMzUyNTYw";
const category = "General";
const categoryId = "DIC_kwDOADMn8M4C3bWR";

    function loadGiscus() {
      const container = document.getElementById('giscus-container');
      if (!container) return;

      const script = document.createElement('script');
      script.src            = 'https://giscus.app/client.js';
      script.setAttribute('data-repo',              repo);
      script.setAttribute('data-repo-id',           repoId);
      script.setAttribute('data-category',          category);
      script.setAttribute('data-category-id',       categoryId);
      script.setAttribute('data-mapping',           'pathname');
      script.setAttribute('data-strict',            '0');
      script.setAttribute('data-reactions-enabled', '1');
      script.setAttribute('data-emit-metadata',     '0');
      script.setAttribute('data-input-position',    'top');
      script.setAttribute('data-theme',             'light');
      script.setAttribute('data-lang',              'en');
      script.setAttribute('data-loading',           'lazy');
      script.crossOrigin    = 'anonymous';
      script.async          = true;
      container.appendChild(script);
    }

    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', loadGiscus);
    } else {
      loadGiscus();
    }
  </script> </article> </div>  </main> <footer class="py-8 border-t border-gray-200 mt-12"> <div class="container mx-auto px-4 text-center"> <p class="text-xs text-gray-600">&copy; 2008-2026 Toby Weston. All rights reserved. (see some old <a class="text-gray-600 hover:text-sky-600" href="/code/">code</a>)</p> </div> </footer> </body></html>