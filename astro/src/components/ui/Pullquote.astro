---
interface Props {
	author?: string;
	company?: string;
}

const { author, company } = Astro.props;
---

<blockquote class="pullquote">
	<div class="pullquote-content">
		<span class="quote-mark quote-mark-open" aria-hidden="true">“</span>
		<div class="pullquote-text">
			<slot />
		</div>
		<span class="quote-mark quote-mark-close" aria-hidden="true">”</span>
	</div>
	{(author || company) && (
		<footer class="pullquote-footer">
			{author && <span class="pullquote-author">{author}</span>}
			{author && company && <span class="pullquote-separator">—</span>}
			{company && <span class="pullquote-company">{company}</span>}
		</footer>
	)}
</blockquote>

<style>
	.pullquote {
		margin: 2rem 0;
		padding: 0;
		border: none;
		font-size: 1.1em;
		line-height: 1.6;
		background: linear-gradient(135deg, rgba(35, 55, 255, 0.04) 0%, rgba(35, 55, 255, 0.02) 100%);
		border-left: 4px solid var(--accent);
		border-radius: 0 8px 8px 0;
		padding: 2rem 2rem 2rem 2.5rem;
		position: relative;
		--quote-mark-size: 3.5rem;
		--quote-mark-gap: 1rem;
	}

	.pullquote-content {
		position: relative;
		display: flex;
		align-items: center;
		justify-content: center;
	}

	.quote-mark {
		font-size: var(--quote-mark-size);
		line-height: 1;
		color: var(--accent);
		opacity: 0.25;
		flex-shrink: 0;
		font-weight: 700;
		font-family: Georgia, serif;
	}

	.quote-mark-open {
		order: -1;
		margin-right: var(--quote-mark-gap);
		align-self: flex-start;
	}

	.quote-mark-close {
		order: 1;
		margin-left: var(--quote-mark-gap);
		align-self: flex-end;
	}

	.pullquote-text {
		margin: 0;
		color: rgb(var(--gray-dark));
		font-style: italic;
		font-weight: 500;
		flex: 1;
		font-size: 1.1em;
	}

	.pullquote-text :global(p) {
		margin: 0;
	}

	.pullquote-footer {
		display: flex;
		align-items: center;
		gap: 0.5rem;
		margin-top: 1.25rem;
		font-size: 0.875em;
		color: rgb(var(--gray));
		font-style: normal;
		font-weight: normal;
		margin-left: calc(var(--quote-mark-size) + var(--quote-mark-gap));
		margin-right: calc(var(--quote-mark-size) + var(--quote-mark-gap));
		justify-content: flex-end;
		text-align: right;
	}

	.pullquote-author {
		font-weight: 600;
		color: rgb(var(--gray-dark));
	}

	.pullquote-separator {
		color: rgb(var(--gray));
	}

	.pullquote-company {
		color: rgb(var(--gray));
	}

	@media (max-width: 720px) {
		.pullquote {
			padding: 1.5rem 1.5rem 1.5rem 2rem;
			border-left-width: 3px;
			--quote-mark-size: 2.5rem;
			--quote-mark-gap: 0;
		}

		.pullquote-content {
			flex-wrap: wrap;
		}

		.quote-mark {
			font-size: 2.5rem;
			margin-right: 0;
			margin-left: 0;
		}

		.pullquote-text {
			flex-basis: 100%;
			order: 1;
		}

		.quote-mark-open {
			order: 0;
			align-self: flex-start;
			margin-bottom: 0.5rem;
		}

		.quote-mark-close {
			order: 2;
			align-self: flex-end;
			margin-top: 0.5rem;
		}

		.pullquote-footer {
			margin-left: 0;
			margin-right: 0;
			justify-content: flex-end;
			text-align: right;
		}
	}
</style>
