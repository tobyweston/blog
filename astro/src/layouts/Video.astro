---
import type { CollectionEntry } from 'astro:content';
import SiteLayout from '../components/ui/SiteLayout.astro';
import FormattedDate from '../components/FormattedDate.astro';

type Props = CollectionEntry<'video'>['data'] & {
  youtubeId: string;
};

const { title, description, keywords, pubDate, youtubeId } = Astro.props;
const embedUrl = `https://www.youtube-nocookie.com/embed/${youtubeId}?rel=0`;
---

<SiteLayout title={`${title} - Videos`} description={description} keywords={keywords}>
  <div class="py-12">
    <article class="">
      <div class="article-title-section mb-8">
        <p class="detail-kicker">Video</p>
        <h1 class="article-title-section h1">{title}</h1>
        {description && (
          <p class="article-description">{description}</p>
        )}
      </div>

      <div class="article-meta">
        <div class="article-date">
          <strong>Published:</strong> <FormattedDate date={pubDate} />
        </div>
      </div>

      <div class="video-detail-frame">
        <iframe
          src={embedUrl}
          title={title}
          loading="lazy"
          allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
          allowfullscreen
        ></iframe>
      </div>

      <section class="prose mt-10">
        <slot />
      </section>
    </article>
  </div>
</SiteLayout>

<style>
  .video-detail-frame {
    position: relative;
    width: 100%;
    padding-top: 56.25%;
    background: #0f172a;
    border-radius: 8px;
    overflow: hidden;
    margin-top: 2rem;
  }

  .video-detail-frame iframe {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    border: 0;
  }
</style>

